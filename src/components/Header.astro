---
import LanguageSwitcher from './LanguageSwitcher.astro';
import ThemeToggle from './ThemeToggle.astro';
import type { SupportedLanguage } from '../utils/posts';
import type { LanguageLink } from '../types/navigation';

interface Props {
  lang: SupportedLanguage;
  languageLinks: LanguageLink[];
}

const { lang, languageLinks } = Astro.props;
const navItems = [
  {
    href: `/${lang}/`,
    label: lang === 'zh' ? '博客' : 'Stories',
  },
];
---
<header class="sticky top-0 z-20 glass-surface">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-5">
    <a href={`/${lang}/`} class="flex items-center gap-2 text-sm font-semibold uppercase tracking-[0.3em] text-muted transition hover:text-accent">
      <span class="h-2 w-8 rounded-full bg-accent"></span>
      <span>Chat Ollama</span>
    </a>
    <nav class="hidden items-center gap-6 text-sm font-medium text-muted md:flex">
      {navItems.map((item) => (
        <a
          href={item.href}
          class="relative transition hover:text-accent"
          aria-current={item.href === Astro.url.pathname ? 'page' : undefined}
        >
          <span class="after:absolute after:-bottom-1 after:left-0 after:h-0.5 after:w-full after:origin-left after:scale-x-0 after:bg-accent after:transition-transform hover:after:scale-x-100">
            {item.label}
          </span>
        </a>
      ))}
    </nav>
    <div class="flex items-center gap-2">
      <LanguageSwitcher links={languageLinks} class="hidden sm:flex" />
      <ThemeToggle />
    </div>
  </div>
</header>
