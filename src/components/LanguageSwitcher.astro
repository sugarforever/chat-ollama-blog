---
import type { SupportedLanguage } from '../utils/posts';
import type { LanguageLink } from '../types/navigation';

interface Props {
  links?: LanguageLink[];
  class?: string;
}

const { links = [], class: className = '' } = Astro.props;
const order: SupportedLanguage[] = ['en', 'zh'];
const sorted = [...links].sort((a, b) => order.indexOf(a.lang) - order.indexOf(b.lang));
---
<nav class={`flex items-center gap-2 text-xs uppercase tracking-[0.35em] text-muted ${className}`} aria-label="Language selection">
  {sorted.length ? (
    sorted.map((link) => (
      <a
        href={link.href}
        class={`rounded-full border px-3 py-1 transition ${
          link.active ? 'border-accent text-accent' : 'border-border hover:border-accent hover:text-accent'
        }`}
      >
        {link.label ?? (link.lang === 'en' ? 'EN' : '中文')}
      </a>
    ))
  ) : (
    <span class="rounded-full border border-border px-3 py-1 text-muted">Soon</span>
  )}
</nav>
